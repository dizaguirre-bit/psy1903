source("scripts/score_questionnaire.R")
source("scripts/summarize_behavior.R")
source("scripts/process_participant.R")
process_participant("data/raw/npt-experiment-2025-11-05-10-33-05.csv")
library(jsonlite)
process_participant("data/raw/npt-experiment-2025-11-05-10-33-05.csv")
source("scripts/process_participant.R")
processed <- process_participant("npt-experiment-2025-11-05-10-08-45.csv")
head(processed)
process_participant <- function(file_name) {
#### Load File and Extract ID ------------------------------------------------
## Derive a subject id from the filename (no extension)
subject_id <- sub("\\.csv$", "", basename(file_path))
## Read the raw CSV
participant_data <- read.csv(
here::here("data", "raw", file_name),
stringsAsFactors = FALSE
)
#### Questionnaire score -----------------------------------------------------
## Score questionnaire with our defaults (reverse 2,4,7 on 0–4 scale)
tef10_score <- score_questionnaire(
json_string = participant_data[participant_data$trialType == "questionnaire", "response"],
reverse = c(2, 4, 7),
scale_min = 0L,
scale_max = 4L
)
#### Behavioral summary ------------------------------------------------------
## Filter and summarize behavioral data (250–900 ms)
behavior <- summarize_behavior(participant_data, rt_min = 250, rt_max = 900)
#### Save participant summary ------------------------------------------------
## Ensure output directory is created
dir.create(
here::here("data", "cleaned", "participants"),
recursive = TRUE,
showWarnings = FALSE
)
## Combine into a single-row participant summary
df_clean <- data.frame(
subject_id = subject_id,
tef10_score = tef10_score,
behavior = behavior
)
## Save summary CSV to cleaned/participants
write.csv(
df_clean,
here::here("data", "cleaned", paste0(subject_id, "_processed.csv")),
row.names = FALSE
)
#### Return output -----------------------------------------------------------
stopifnot(nrow(df_clean) == 1)  # one row per participant
return(df_clean)
}
source("scripts/process_participant.R")
processed <- process_participant("npt-experiment-2025-11-05-10-08-45.csv")
head(processed)
source("scripts/process_participant.R")
processed <- process_participant("npt-experiment-2025-11-05-10-33-05.csv")
head(processed)
## Read the raw CSV
participant_data <- read.csv(
here::here("data", "raw", file_name),
stringsAsFactors = FALSE
)
library(here)
#### Load File and Extract ID ------------------------------------------------
## Derive a subject id from the filename (no extension)
subject_id <- sub("\\.csv$", "", basename(file_path))
if (!require(here)) install.packages("here")
library(here)
## Read the raw CSV
participant_data <- read.csv(
here::here("data", "raw", file_name),
stringsAsFactors = FALSE
)
#### Load File and Extract ID ------------------------------------------------
## Derive a subject id from the filename (no extension)
subject_id <- sub("\\.csv$", "", basename(file_name))
source("scripts/process_participant.R")
processed <- process_participant("npt-experiment-2025-11-05-10-08-45.csv")
head(processed)
source("scripts/process_participant.R")
processed <- process_participant("npt-experiment-2025-11-05-10-33-05.csv")
head(processed)
source("scripts/process_participant.R")
source("scripts/process_participant.R")
source("scripts/process_participant.R")
processed <- process_participant("npt-experiment-2025-11-05-10-33-05.csv")
head(processed)
# Load here::here robustly
if (!require(here)) install.packages("here")
library(here)
# Load the study-level dataset built in our previous workflow
study_level <- read.csv(here("data/cleaned/study_level.csv"))
# Quick inspection
head(study_level)
str(study_level)
summary(study_level)
## Replace Column Names
names(study_level) <- c("subject_id", "tef10_score", "practice_mean_rt", "practice_acc", "magnitude_mean_rt", "magnitude_acc", "parity_mean_rt", "parity_acc", "practice_sd_rt", "magnitude_sd_rt", "parity_sd_rt")
write.csv(study_level, here::here("data/cleaned/study_level.csv"), row.names = FALSE)
# A) Reaction time difference (complete this line together)
# hint: subtract magnitude mean RT from parity mean RT
study_level$rt_diff <-
# B) Accuracy difference (complete together)
study_level$acc_diff <-
# C) Overall averages across conditions
study_level$mean_rt_overall  <- rowMeans(
study_level[, c("magnitude_mean_rt", "parity_mean_rt")],
na.rm = TRUE
)
study_level$mean_acc_overall <- rowMeans(
study_level[, c("magnitude_acc", "parity_acc")],
na.rm = TRUE
)
# Peek at the new columns
head(study_level[, c("subject_id", "rt_diff", "acc_diff",
"mean_rt_overall", "mean_acc_overall")])
# A) Reaction time difference (complete this line together)
# hint: subtract magnitude mean RT from parity mean RT
study_level$rt_diff <- study_level$parity_mean_rt - study_level$magnitude_mean_rt
# B) Accuracy difference (complete together)
study_level$acc_diff <- study_level$parity_acc - study_level$magnitude_acc
# C) Overall averages across conditions
study_level$mean_rt_overall  <- rowMeans(
study_level[, c("magnitude_mean_rt", "parity_mean_rt")],
na.rm = TRUE
)
study_level$mean_acc_overall <- rowMeans(
study_level[, c("magnitude_acc", "parity_acc")],
na.rm = TRUE
)
# Peek at the new columns
head(study_level[, c("subject_id", "rt_diff", "acc_diff",
"mean_rt_overall", "mean_acc_overall")])
View(study_level)
# Class-level means
colMeans(study_level[, c("magnitude_mean_rt",
"parity_mean_rt",
"rt_diff")],
na.rm = TRUE)
# Class-level variability (standard deviations)
sapply(study_level[, c("magnitude_mean_rt",
"parity_mean_rt",
"rt_diff")],
sd, na.rm = TRUE)
mean(study_level$parity_mean_rt, na.rm = TRUE)
round(mean(study_level$parity_mean_rt, na.rm = TRUE), 2)
# Create a focus grouping variable from tef10_score
focus_cut <- mean(study_level$tef10_score, na.rm = TRUE)
study_level$focus_group <- ifelse(study_level$tef10_score >= focus_cut,
"High Focus", "Low Focus")
# Check group counts
table(study_level$focus_group)
# Aggregate reaction times and differences by focus group
rt_by_focus <- aggregate(
study_level[, c("magnitude_mean_rt",
"parity_mean_rt",
"rt_diff")],
by = list(Focus = study_level$focus_group),
FUN = mean
)
rt_by_focus
# Aggregate accuracies and differences by focus group
acc_by_focus <- aggregate(
study_level[, c("magnitude_acc",
"parity_acc",
"acc_diff")],
by = list(Focus = study_level$focus_group),
FUN = mean
)
acc_by_focus
str(study_level)
# What do we notice here?
# Summaries for key variables
summary(study_level[, c("magnitude_mean_rt",
"parity_mean_rt",
"rt_diff",
"magnitude_acc",
"parity_acc",
"acc_diff")])
# Optional exploration: association between overall RT and overall accuracy
cor(study_level$mean_rt_overall, study_level$mean_acc_overall, use = "complete.obs")
?source
?names
?ls()
objects()
?objects()
process_participant
View(study_level)
