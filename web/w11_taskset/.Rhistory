behavior <- data.frame(
mean_accuracy <- mean_accuracy,
mean_rt_correct <- mean_rt_correct,
stringsAsFactors = FALSE
)
return(behavior)
}
summarize_behavior(participant_data)
View(compute_rt_if_missing)
compute_rt_if_missing <- function(data) {
# Compute reaction time if missing value in rt column
data$rt  <- ifelse(
!is.na(data$response)
& is.na(data$rt)
& !is.na(data$stim_onset_ms)
& !is.na(data$resp_time_ms),
data$resp_time_ms - data$stim_onset_ms,
data$rt)
}
View(compute_rt_if_missing)
list.files("data/raw", pattern = "^est-experiment-.*\\.csv$", full.names = TRUE)
process_participant <- function(file_path) {
# Derive subject ID from file path
subject_id <- sub("\\.csv$", "", basename(file_path))
# Read the raw CSV
participant_data <- read.csv(
here::here("data", "raw", file_path),
stringsAsFactors = FALSE
)
#### Compute RT if it is missing
compute_rt_if_missing (participant_data)
#### Questionnaire score -----------------------------------------------------
## Score questionnaire with our defaults (reverse 2,5,9 on 0–4 scale)
esq_sum <- score_questionnaire(
json_string = participant_data[participant_data$trialType == "es_questionnaire", "response"],
reverse = c(2, 5, 9),
scale_min = 0L,
scale_max = 4L
)
#### Behavioral summary ------------------------------------------------------
## Filter and summarize behavioral data (300–900 ms)
behavior <- summarize_behavior(participant_data, rt_min = 300, rt_max = 900)
#### Save participant summary ------------------------------------------------
## Ensure output directory is created
dir.create(
here::here("data", "cleaned", "participants"),
recursive = TRUE,
showWarnings = FALSE
)
## Combine into a single-row participant summary
df_clean <- data.frame(
subject_id = subject_id,
behavior = behavior,
esq_sum = esq_sum
)
## Save summary .csv to cleaned/participants
write.csv(
df_clean,
here::here("data", "cleaned", paste0(subject_id, "_processed.csv")),
row.names = FALSE
)
}
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files("../data/raw", pattern = "^npt-experiment-.*\\.csv$", full.names = TRUE)
participant_rows <- lapply(file_list, process_participant)
study_level <- do.call(rbind, participant_rows)
dir.create("../data/cleaned", recursive = TRUE, showWarnings = FALSE)
write.csv(study_level, "../data/cleaned/study_level.csv", row.names = FALSE)
saveRDS(study_level, "../data/cleaned/study_level.rds")
stopifnot(nrow(study_level) == length(file_list))
head(study_level)
names(participant_rows[[1]])
names(participant_rows[[2]])
View(participant_rows)
rm(list=ls())
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
process_participant("data/raw/est-experiment-2025-11-05-09-04-45.csv")
1
rm(list=ls())
source("../scripts/compute_rt_if_missing.R")
source("../scripts/compute_rt_if_missing.R")
source("scripts/compute_rt_if_missing.R")
source("scripts/score_questionnaire.R")
source("scripts/summarize_behavior.R")
source("scripts/process_participant.R")
process_participant("data/raw/est-experiment-2025-11-05-09-04-45.csv")
traceback()
source("scripts/compute_rt_if_missing.R")
source("scripts/score_questionnaire.R")
source("scripts/summarize_behavior.R")
source("scripts/process_participant.R")
source("scripts/compute_rt_if_missing.R")
source("scripts/score_questionnaire.R")
source("scripts/summarize_behavior.R")
source("scripts/process_participant.R")
View(process_participant)
process_participant("data/raw/est-experiment-2025-11-05-09-04-45.csv")
process_participant("est-experiment-2025-11-05-09-04-45.csv")
process_participant("est-experiment-2025-11-05-09-04-45.csv")
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files("../data/raw", pattern = "^npt-experiment-.*\\.csv$", full.names = TRUE)
study_level <- do.call(rbind, participant_rows)
traceback()
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- file_list <- list.files(
here::here("data", "raw"),
pattern = "^npt-experiment-.*\\.csv$",
full.names = FALSE
)
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- file_list <- list.files(
here::here("data", "raw"),
pattern = "^npt-experiment-.*\\.csv$",
full.names = FALSE
)
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^npt-experiment-.*\\.csv$",
full.names = FALSE
)
rm(list=ls())
source("scripts/compute_rt_if_missing.R")
source("scripts/score_questionnaire.R")
source("scripts/summarize_behavior.R")
source("scripts/process_participant.R")
process_participant("est-experiment-2025-11-05-09-04-45.csv")
library(readr)
est_experiment_2025_11_05_09_04_45_processed <- read_csv("data/cleaned/est-experiment-2025-11-05-09-04-45_processed.csv")
View(est_experiment_2025_11_05_09_04_45_processed)
rm(list=ls())
source("scripts/compute_rt_if_missing.R")
source("scripts/score_questionnaire.R")
source("scripts/summarize_behavior.R")
source("scripts/process_participant.R")
process_participant("est-experiment-2025-11-05-09-04-45.csv")
library(readr)
est_experiment_2025_11_05_09_04_45_processed <- read_csv("data/cleaned/est-experiment-2025-11-05-09-04-45_processed.csv")
View(est_experiment_2025_11_05_09_04_45_processed)
rm(list=ls())
traceback()
study_level <- do.call(rbind, participant_rows)
---
title: "Week 11 Task Set"
---
title: "Week 11 Task Set"
"
---
title: "Week 11 Task Set"
---
title: "Week 11 Task Set"
---
title: "Week 11 Task Set"
source("scripts/compute_rt_if_missing.R")
source("scripts/score_questionnaire.R")
source("scripts/summarize_behavior.R")
source("scripts/process_participant.R")
process_participant("est-experiment-2025-11-05-09-07-45.csv")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^npt-experiment-.*\\.csv$",
full.names = FALSE
)
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
traceback()
participant_rows <- lapply(file_list, process_participant)
traceback()
names(participant_rows)
source("scripts/compute_rt_if_missing.R")
source("scripts/score_questionnaire.R")
source("scripts/summarize_behavior.R")
source("scripts/process_participant.R")
process_participant("est-experiment-2025-11-05-09-07-45.csv")
process_participant("est-experiment-2025-11-05-09-012-45.csv")
process_participant("est-experiment-2025-11-05-09-12-45.csv")
library(readr)
est_experiment_2025_11_05_10_11_45 <- read_csv("data/raw/est-experiment-2025-11-05-10-11-45.csv")
View(est_experiment_2025_11_05_10_11_45)
library(readr)
est_experiment_2025_11_05_10_11_45 <- read_csv("data/raw/est-experiment-2025-11-05-10-11-45.csv")
View(est_experiment_2025_11_05_10_11_45)
est_experiment_2025_11_05_10_11_45$response
compute_rt_if_missing(est_experiment_2025_11_05_10_11_45)
View(est_experiment_2025_11_05_10_11_45)
est_experiment_2025_11_05_10_11_45$rt
participant_data <- est_experiment_2025_11_05_10_11_45
participant_data$rt  <- ifelse(
!is.na(participant_data$response)
& is.na(participant_data$rt)
& !is.na(participant_data$stim_onset_ms)
& !is.na(participant_data$resp_time_ms),
participant_data$resp_time_ms - participant_data$stim_onset_ms,
participant_data$rt)
View(participant_data)
compute_rt_if_missing(participant_data)
View(participant_data)
View(est_experiment_2025_11_05_10_11_45)
rm(participant_data)
participant_data <- est_experiment_2025_11_05_10_11_45
compute_rt_if_missing(participant_data)
View(participant_data)
rm(list=ls())
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
library(readr)
est_experiment_2025_11_05_09_04_45_processed <- read_csv("data/cleaned/est-experiment-2025-11-05-09-04-45_processed.csv")
View(est_experiment_2025_11_05_09_04_45_processed)
library(readr)
est_experiment_2025_11_05_10_08_45 <- read_csv("data/raw/est-experiment-2025-11-05-10-08-45.csv")
View(est_experiment_2025_11_05_10_08_45)
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
View(est_experiment_2025_11_05_10_08_45)
source("../scripts/compute_rt_if_missing.R")
source("scripts/compute_rt_if_missing.R")
source("scripts/score_questionnaire.R")
source("scripts/summarize_behavior.R")
source("scripts/process_participant.R")
source("scripts/compute_rt_if_missing.R")
source("scripts/score_questionnaire.R")
source("scripts/summarize_behavior.R")
source("scripts/process_participant.R")
View(compute_rt_if_missing)
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
participant_rows <- lapply(file_list, process_participant)
library(readr)
est_experiment_2025_11_05_09_04_45 <- read_csv("data/raw/est-experiment-2025-11-05-09-04-45.csv")
View(est_experiment_2025_11_05_09_04_45)
participant_data <- est_experiment_2025_11_05_09_04_45
compute_rt_if_missing(participant_data)
View(participant_data)
compute_rt_if_missing(participant_data)
View(participant_data)
participant_data$rt <- compute_rt_if_missing(participant_data)
View(participant_data)
rm(list=ls(0))
rm(list=ls())
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
participant_rows <- lapply(file_list, process_participant)
traceback()
str(participant_data)
participant_rows <- lapply(file_list, process_participant)
library(readr)
est_experiment_2025_11_05_09_04_45 <- read_csv("data/raw/est-experiment-2025-11-05-09-04-45.csv")
View(est_experiment_2025_11_05_09_04_45)
participant_data <- est_experiment_2025_11_05_09_04_45
process_participant(participant_data)
process_participant("est_experiment_2025-11-05-09-04-45.csv")
traceback()
View(est_experiment_2025_11_05_09_04_45)
process_participant("est_experiment_2025_11_05_09_04_45.csv")
process_participant("est-experiment-2025-11-05-09-04-45.csv")
View(data)
rm(list=ls())
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
rm(list=ls(0))
rm(list=ls())
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
process_participant("est-experiment-2025-11-05-09-04-45.csv")
participant_rows <- lapply(file_list, process_participant)
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
participant_rows <- lapply(file_list, process_participant)
rm(list=ls())
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
participant_rows <- lapply(file_list, process_participant)
library(readr)
participant_data <- read_csv("data/raw/est-experiment-2025-11-05-09-04-45.csv")
View(participant_data)
participant_data <- compute_rt_if_missing(participant_data)
View(participant_data)
View(participant_data)
source("../scripts/compute_rt_if_missing.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
participant_rows <- lapply(file_list, process_participant)
rm(list=ls())
source("../scripts/compute_rt_if_missing.R")
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
participant_rows <- lapply(file_list, process_participant)
participant_rows <- lapply(file_list, process_participant)
rm(list=ls())
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
participant_rows <- lapply(file_list, process_participant)
rm(list=ls())
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
participant_rows <- lapply(file_list, process_participant)
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
participant_rows <- lapply(file_list, process_participant)
traceback()
rm(list=ls())
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
participant_rows <- lapply(file_list, process_participant)
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
rm(list=ls())
source("../scripts/compute_rt_if_missing.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
participant_rows <- lapply(file_list, process_participant)
file_list
participant_rows <- lapply(file_list, process_participant)
View(data)
names(data)
str(data)
rm(list=ls())
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
participant_rows <- lapply(file_list, process_participant)
traceback()
participant_rows <- lapply(file_list, process_participant)
traceback()
rm(list=ls())
if (!require("pacman")) {install.packages("pacman"); require("pacman")}
p_load("jsonlite", "ggplot2")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
source("../scripts/compute_rt_if_missing.R")
source("../scripts/score_questionnaire.R")
source("../scripts/summarize_behavior.R")
source("../scripts/process_participant.R")
# Prefer a pattern to avoid accidentally pulling other CSVs
file_list <- list.files(
here::here("data", "raw"),
pattern = "^est-experiment-.*\\.csv$",
full.names = FALSE
)
participant_rows <- lapply(file_list, process_participant)
study_level <- do.call(rbind, participant_rows)
View(study_level)
dir.create("../data/cleaned", recursive = TRUE, showWarnings = FALSE)
write.csv(study_level, "../data/cleaned/study_level.csv", row.names = FALSE)
saveRDS(study_level, "../data/cleaned/study_level.rds")
stopifnot(nrow(study_level) == length(file_list))
head(study_level)
View(study_level)
View(study_level)
